{% extends "dashboard/base_dashboard.html" %}
{% block dashboard_content %}
<h2>Elcoin Wallet</h2>

<div class="card">
  <h3>Your Wallet Address</h3>
  <p class="wallet-address">{{ user.wallet_address }}</p>
</div>

<div class="card">
  <h3>Balance</h3>
  <p class="balance">{{ balance }} ELX</p>
</div>

<section class="card mt-2">
  <h3>Send Elcoin</h3>
  <form method="POST" class="form-inline">
    {{ form.hidden_tag() }}
    <div class="form-group">
      {{ form.recipient_address(class="form-control", placeholder="Wallet Address") }}
    </div>
    <div class="form-group">
      {{ form.amount(class="form-control", placeholder="Amount") }}
    </div>
    <div class="form-group">
      {{ form.submit(class="btn btn--primary") }}
    </div>
  </form>
</section>

<section class="card mt-2">
  <h3>Transaction History</h3>
  <table class="table">
    <thead>
      <tr>
        <th>When</th><th>Action</th><th>Amount</th>
      </tr>
    </thead>
    <tbody>
      {% for tx in history %}
        <tr>
          <td>{{ tx.timestamp.strftime("%Y-%m-%d %H:%M") }}</td>
          <td>
            {% if tx.from_user_id == user.id %}
              Sent to {{ tx.receiver.wallet_address }}
            {% else %}
              Received from {{ tx.sender.wallet_address }}
            {% endif %}
          </td>
          <td>{{ tx.amount }} ELX</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
